{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport './styles.scss';\n// import classes from './_style.module.scss';\n\nexport interface SlideButtonProps {\n\tclassName?: string;\n\tonStartDrag?: () => void;\n\tonCancelDrag: () => void;\n\tonFinishDrag: () => void;\n\tslideDirection: 'left' | 'right';\n\tstartClosed: boolean;\n\tfinishThreshold?: number;\n\ttext?: string;\n\tcontainerWidth?: number;\n\tclosedContainerWidth?: number;\n\tcontainerClassName?: string;\n\tsliderClassName?: string;\n\ttextClassName?: string;\n}\n\nconst DEFAULT_CONTAINER_WIDTH = 170;\nconst IS_TOUCH_DEVICE = 'ontouchstart' in (window || document.documentElement);\n\nconst SlideButton: React.FC<SlideButtonProps> = props => {\n\tconst { slideDirection } = props;\n\tconst containerWidth = props.containerWidth || DEFAULT_CONTAINER_WIDTH;\n\n\tconst [isDragging, setIsDragging] = React.useState<boolean>(false);\n\tconst [sliderPos, setSliderPos] = React.useState<number>(0);\n\tconst [startX, setStartX] = React.useState<number>(0);\n\tconst [currX, setCurrX] = React.useState<number>(0);\n\n\tconst slider = React.createRef<HTMLDivElement>();\n\tconst container = React.createRef<HTMLDivElement>();\n\n\tconst cls = `slide-button ${props.className && props.className}`;\n\tconst containerCls = `slide-container ${props.containerClassName && props.containerClassName}`;\n\tconst sliderCls = `slider ${slideDirection === 'right' ? 'left-position' : 'right-position'}`;\n\tconst textSliderCls = `slider-text ${isDragging || !props.startClosed ? 'show' : ''} ${props.textClassName ? props.textClassName : ''}`;\n\n\tconst updateSliderStyle = (value: number) => {\n\t\tif (slider.current) {\n\t\t\tif (slideDirection === 'left') {\n\t\t\t\tslider.current.style.right = `${value}px`;\n\t\t\t} else {\n\t\t\t\tslider.current.style.left = `${value}px`;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst updateContainerStyle = (value: number) => {\n\t\tif (container.current) {\n\t\t\tcontainer.current.style.width = `${value}px`;\n\t\t}\n\t};\n\n\tReact.useEffect(() => {\n\t\tif (props.startClosed) {\n\t\t\tupdateContainerStyle(props.closedContainerWidth || 35);\n\t\t} else if (props.containerWidth) {\n\t\t\tupdateContainerStyle(containerWidth);\n\t\t}\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tif (isDragging) {\n\t\t\tconst currentPosition =\n\t\t\t\tslideDirection === 'left'\n\t\t\t\t\t? Math.max(Math.min(startX - currX, containerWidth), 0)\n\t\t\t\t\t: Math.min(Math.max(0, currX - startX), containerWidth);\n\t\t\tsetSliderPos(currentPosition);\n\t\t\tupdateSliderStyle(currentPosition);\n\t\t}\n\t}, [startX, currX]);\n\n\tconst onDrag = (e: React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>) => {\n\t\tif (e instanceof TouchEvent && IS_TOUCH_DEVICE) {\n\t\t\tsetCurrX(e.touches[0].clientX);\n\t\t} else if (e instanceof MouseEvent) {\n\t\t\tsetCurrX(e.clientX);\n\t\t}\n\t};\n\n\tconst reset = () => {\n\t\tif (props.startClosed) {\n\t\t\tupdateContainerStyle(props.closedContainerWidth || 35);\n\t\t}\n\t\tupdateSliderStyle(0);\n\t};\n\n\tconst startDrag = (e: React.TouchEvent<HTMLDivElement> | React.MouseEvent<HTMLDivElement>) => {\n\t\tsetSliderPos(0);\n\t\tupdateContainerStyle(containerWidth);\n\t\tupdateSliderStyle(0);\n\t\tsetIsDragging(true);\n\n\t\tif (e instanceof TouchEvent && IS_TOUCH_DEVICE) {\n\t\t\tsetStartX(e.touches[0].clientX);\n\t\t\tsetCurrX(e.touches[0].clientX);\n\t\t} else if (e instanceof MouseEvent) {\n\t\t\tsetStartX(e.clientX);\n\t\t\tsetCurrX(e.clientX);\n\t\t}\n\n\t\tif (props.onStartDrag) {\n\t\t\tprops.onStartDrag();\n\t\t}\n\t};\n\n\tconst stopDrag = () => {\n\t\tif (isDragging) {\n\t\t\tsetIsDragging(false);\n\t\t\treset();\n\n\t\t\tif (sliderPos >= containerWidth * (props.finishThreshold || 1)) {\n\t\t\t\tprops.onFinishDrag();\n\t\t\t} else {\n\t\t\t\tprops.onCancelDrag();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={cls}>\n\t\t\t<div className={containerCls} ref={container}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={sliderCls}\n\t\t\t\t\tref={slider}\n\t\t\t\t\tonTouchStart={startDrag}\n\t\t\t\t\tonTouchEnd={stopDrag}\n\t\t\t\t\tonTouchMove={onDrag}\n\t\t\t\t\tonMouseDown={startDrag}\n\t\t\t\t\tonMouseMove={onDrag}\n\t\t\t\t\tonMouseUp={stopDrag}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t\t<div className={textSliderCls}>{props.text || ''}</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SlideButton;\n"],"names":["React"],"mappings":"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"}